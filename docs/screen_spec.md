# 画面仕様書 - Philos Admin

## 1. 概要

このドキュメントは、社内エンゲージメントツール「Philos」の管理者向けWebアプリケーションの画面構成と主要機能について定義します。管理者はこのアプリケーションを通じて、メンバー管理、コンテンツ配信、各種設定を行うことができます。

---

## 2. 画面一覧

本アプリケーションは、以下の主要画面で構成されます。

| No. | 画面名             | URL                      | 概要                                         |
| --- | ------------------ | ------------------------ | -------------------------------------------- |
| 1   | ログイン画面       | `/login`                 | 管理者アカウントでログインするための画面。     |
| 2   | ダッシュボード     | `/dashboard`             | 管理機能への起点となるメイン画面。           |
| 2.1 | メンバー管理       | `/dashboard/members`     | 従業員アカウントの閲覧、追加、編集、削除を行う。 |
| 2.2 | コンテンツ管理     | `/dashboard/contents`    | 経営層メッセージやビデオコンテンツを管理する。 |
| 2.3 | 理念管理           | `/dashboard/philosophy`  | 会社のミッション・ビジョン・バリューを編集する。 |
| 2.4 | ダッシュボード設定 | `/dashboard/dashboard`   | エンゲージメント目標や売上目標/実績を登録する。 |
| 2.5 | ランキング設定     | `/dashboard/ranking`     | （将来拡張用）ランキング表示に関する設定を行う。 |

---

## 3. 機能詳細

### 3.1. ログイン画面 (`/login`)

-   **メールアドレスとパスワードによるログイン機能**
    -   管理者権限（`role: 'admin'`）を持つユーザーのみログイン可能です。
    -   権限がないユーザーがログインしようとした場合、エラーメッセージを表示します。
-   **初回管理者アカウント作成機能**
    -   システムに一人も管理者が登録されていない場合に限り、最初の管理者アカウントを作成するための導線が表示されます。

### 3.2. ダッシュボード共通

-   **サイドナビゲーション**
    -   各管理機能へのリンクがアイコンと共に表示されます。
    -   ナビゲーションは折りたたみ可能で、アイコンのみの表示に切り替えられます。
-   **認証チェック**
    -   ログインしていないユーザー、または管理者権限のないユーザーがアクセスした場合、自動的にログインページにリダイレクトされます。
-   **ログアウト機能**

### 3.3. メンバー管理 (`/dashboard/members`)

-   **メンバー一覧表示**
    -   登録されている全メンバーがテーブル形式で表示されます。
    -   表示項目: 氏名/メール、社員番号、所属会社、所属部署、権限、登録日。
-   **メンバー検索機能**
    -   名前やメールアドレスでメンバーを検索できます。
-   **メンバー追加機能**
    -   ダイアログを通じて、新しいメンバーを一人ずつ登録できます。
    -   登録項目: 氏名、メール、パスワード、社員番号、所属、権限など。
-   **メンバー編集機能**
    -   既存メンバーの情報を編集できます（メールアドレスは変更不可）。
-   **メンバー削除機能**
    -   メンバーをデータベースから削除します（確認ダイアログあり）。
-   **CSVインポート機能**
    -   指定したフォーマットのCSVファイルをアップロードし、メンバーを一括登録できます。
    -   登録前にプレビューが表示され、インポート結果（成功/失敗件数）はトーストで通知されます。
-   **CSVエクスポート機能**
    -   現在登録されている全メンバーの情報をCSVファイルとしてダウンロードできます。

### 3.4. コンテンツ管理 (`/dashboard/contents`)

この画面は「ビデオ管理」と「メッセージ管理」の2つのタブで構成されます。

#### ビデオ管理

-   **ビデオ一覧表示**
    -   登録済みのビデオがサムネイル付きのテーブル形式で表示されます。
    -   表示項目: サムネイル、タイトル、タグ、各種カウント数（いいね、コメント、閲覧）、アップロード日。
-   **ビデオ追加・編集・削除機能**
    -   ダイアログを通じてビデオ情報の登録・編集が可能です。
    -   登録項目: タイトル、概要、動画URL、サムネイルURL、タグ。
-   **複数選択・一括削除機能**
    -   チェックボックスで複数のビデオを選択し、一括で削除できます。

#### メッセージ管理

-   **メッセージ一覧表示**
    -   経営層からのメッセージがテーブル形式で表示されます。
    -   表示項目: タイトル、タグ、重要度、作成者/作成日、各種カウント数。
-   **メッセージ追加・編集・削除機能**
    -   ダイアログを通じてメッセージの登録・編集が可能です。
    -   登録項目: タイトル、内容、重要度、タグ。
-   **複数選択・一括削除機能**
    -   複数のメッセージを選択し、一括で削除できます。

#### 共通機能 (Counts詳細)

-   一覧の「Counts」部分（いいね数、コメント数）をクリックすると、詳細ダイアログが表示されます。
-   **コメントタブ**:
    -   当該コンテンツに紐づくコメントと返信が階層形式で表示されます。
    -   コメントの投稿、返信、削除がダイアログ内で行えます。
-   **いいねタブ**:
    -   「いいね」したユーザーの名前とアバターの一覧が表示されます。
-   **既読タブ**:
    -   （将来拡張用）コンテンツを閲覧したユーザーの一覧を表示します。

### 3.5. 理念管理 (`/dashboard/philosophy`)

-   **ミッション、ビジョン、バリューの編集機能**
    -   会社の理念に関するテキスト情報を編集し、保存することができます。

### 3.6. ダッシュボード設定 (`/dashboard/dashboard`)

-   **目標設定機能**
    -   エンゲージメントスコアなどの目標値を期間や対象（全社、部署別）ごとに設定します。
-   **売上設定機能**
    -   月次での売上目標と売上実績を登録・管理します。
    -   登録項目: 対象期間（年月）、売上目標、売上実績。

