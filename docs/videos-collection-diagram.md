# `videos` コレクションの階層構造

`videos` コレクションと、その中の各ビデオに紐づく `comments` および `likes` サブコレクションの関係は、以下のような親子関係の階層構造になります。

```text
Firestoreデータベース
└── videos (コレクション)
    ├── video_01 (ドキュメント)                 <-- 動画1
    │   ├── title: "第4四半期 全社ミーティング"
    │   ├── description: "CEOからのメッセージ"
    │   ├── src: "http://..."
    │   ├── likesCount: 1
    │   │
    │   ├── comments (サブコレクション)          <-- video_01に紐づくコメント群
    │   │   ├── comment_A (コメントドキュメント)
    │   │   │   ├── authorId: "user_tanaka"
    │   │   │   └── content: "大変参考になりました。"
    │   │   │
    │   │   └── comment_B (コメントドキュメント)
    │   │       ├── authorId: "user_sato"
    │   │       └── content: "次の展開も楽しみにしています！"
    │   │
    │   └── likes (サブコレクション)             <-- video_01に紐づく「いいね」群
    │       └── user_suzuki (いいねドキュメント)  <-- いいねした人のUIDがIDになる
    │           └── likedAt: "2024-08-01T10:00:00Z"
    │
    └── video_02 (ドキュメント)                 <-- 動画2
        ├── title: "デザインチームより"
        ├── description: "新プロダクトのコンセプト紹介"
        ...

```

### 図の説明

*   **`videos` (コレクション)**:
    すべてのビデオ情報を格納するトップレベルのコレクションです。

*   **`video_01` (ドキュメント)**:
    個々のビデオデータを表すドキュメントです。`videoId` がドキュメントIDになります。`title` や `description` などのフィールドを持ちます。

*   **`comments` (サブコレクション)**:
    特定のビデオに投稿されたコメント群を格納します。各ドキュメント（`comment_A`など）が1つのコメントに相当します。

*   **`likes` (サブコレクション)**:
    特定のビデオを「いいね」したユーザーの記録を格納します。**ドキュメントIDに`userId`を使用する**ことで、誰がいいねしたかを管理し、1ユーザー1いいねを保証します。
